<pfng-wizard #wizard
             [config]="config"
             (onCancel)="cancel($event)"
             (onNext)="nextClicked($event)"
             (onPrevious)="previousClicked($event)"
             (onStepChange)="stepChanged($event)">

  <div style="min-height: 450px" class="wizard-pf-loading blank-slate-pf loading" *ngIf="isLoading">
    <div class="spinner spinner-lg blank-slate-pf-icon"></div>
    <h3 class="blank-slate-pf-main-action">Loading Wizard</h3>
    <p class="blank-slate-pf-secondary-action">
      The wizard is loading the initial screen...
    </p>
  </div>

  <div [formGroup]="form" [ngSwitch]="currentGui.metadata?.name">
    <pfng-wizard-step [config]="steps[0]">
      <pfng-wizard-substep [config]="steps[3]">
      <span *ngSwitchCase="'io.fabric8.forge.generator.github.GithubImportPickOrganisationStep'">
        <organisation-step [gui]="currentGui" [form]="form"></organisation-step>
      </span>
      </pfng-wizard-substep>
      <pfng-wizard-substep [config]="steps[4]">
      <span *ngSwitchCase="'io.fabric8.forge.generator.github.GithubImportPickRepositoriesStep'">
        <repositories-step [gui]= "currentGui" [form]="form"></repositories-step>
      </span>
      </pfng-wizard-substep>
    </pfng-wizard-step>


    <pfng-wizard-step [config]="steps[1]">
      <pfng-wizard-substep [config]="steps[5]">
      <span *ngSwitchCase="'Obsidian: Configure Pipeline'">
        <pipeline-step [gui]="currentGui" [form]="form" [labelSpace]="currentSpace.attributes.name"></pipeline-step>
      </span>
      </pfng-wizard-substep>

      <pfng-wizard-substep [config]="steps[6]">
      <span *ngSwitchCase="'io.fabric8.forge.generator.kubernetes.CreateBuildConfigStep'">
        <build-config-step [gui]="currentGui" [form]="form"></build-config-step>
      </span>
      </pfng-wizard-substep>
    </pfng-wizard-step>

    <pfng-wizard-step [config]="steps[2]">
      <pfng-wizard-substep [config]="steps[7]">
      <span *ngSwitchCase="'Review'">
        <review-step [gui]="currentGui"></review-step>
      </span>
      </pfng-wizard-substep>
    </pfng-wizard-step>
  </div>
</pfng-wizard>


